<!--
  Copyright 2019 Toru Higuruma

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="author" content="Toru Higuruma" />
    <meta name="application-name" content="BPM2FPS" />
    <meta name="description" content="Calculate the optimal frame rate for music video authoring" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />

    <title>BPM2FPS - Calculate the optimal frame rate for music video authoring</title>
  </head>
  <body>
    <div class="container mt-sm-5" style="max-width: 540px">
      <h1>BPM2FPS</h1>
      <p class="lead mb-4">Calculate the optimal frame rate for music video authoring</p>

      <form>
        <div class="form-group row">
          <label for="bpmInput" class="col-sm-3 col-form-label-lg">BPM</label>
          <div class="col-sm">
            <input type="number" id="bpmInput" class="form-control form-control-lg" value="100" min="1" placeholder="100" autofocus="autofocus" />
          </div>
        </div>
        <div class="form-group row">
          <label for="divInput" class="col-sm-3 col-form-label">Beat Divider</label>
          <div class="col-sm">
            <input type="number" id="divInput" class="form-control" value="4" min="1" placeholder="4" />
          </div>
        </div>
        <div class="form-group row">
          <label for="minFpsInput" class="col-sm-3 col-form-label">Minimum FPS</label>
          <div class="col-sm">
            <input type="number" id="minFpsInput" class="form-control" value="30" min="1" placeholder="30" />
          </div>
        </div>
        <hr />
        <div class="form-group row">
          <label for="fpsOutput" class="col-sm-3 col-form-label-lg">FPS</label>
          <div class="col-sm">
            <div class="input-group input-group-lg">
              <input type="text" id="fpsOutput" class="form-control form-control-lg" readonly="readonly" />
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary" id="fpsCopyButton">Copy</button>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row">
          <label for="fpsROutput" class="col-sm-3 col-form-label">FPS &#x211A;</label>
          <div class="col-sm">
            <div class="input-group">
              <input type="text" id="fpsROutput" class="form-control" readonly="readonly" />
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary" id="fpsRCopyButton">Copy</button>
              </div>
            </div>
          </div>
        </div>
      </form>
      <footer class="my-5 text-center text-muted">
        <p><small>&copy; 2019 <a href="https://github.com/neofuji">Toru Higuruma</a></small></p>
        <p><small><a href="https://github.com/neofuji/bpm2fps">Source Code</a> (Apache License 2.0)</small></p>
      </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script>
      var bpmInputElem = document.getElementById("bpmInput");
      var divInputElem = document.getElementById("divInput");
      var minFpsInputElem = document.getElementById("minFpsInput");
      var fpsOutputElem = document.getElementById("fpsOutput");
      var fpsROutputElem = document.getElementById("fpsROutput");
      var fpsCopyButtonElem = document.getElementById("fpsCopyButton");
      var fpsRCopyButtonElem = document.getElementById("fpsRCopyButton");
      bpmInputElem.addEventListener("input", onChange);
      divInputElem.addEventListener("input", onChange);
      minFpsInputElem.addEventListener("input", onChange);
      fpsCopyButtonElem.addEventListener("click", onClickFpsCopy);
      fpsRCopyButtonElem.addEventListener("click", onClickFpsRCopy);
      onChange(null);

      function onChange(event) {
        var bpm = parseFloat(bpmInputElem.value);
        var divider = parseFloat(divInputElem.value);
        var minFps = parseFloat(minFpsInputElem.value);
        var framesPerBeat = Math.ceil(60 * minFps / bpm / divider) * divider;
        fpsOutputElem.value = bpm * framesPerBeat / 60 || "";
        fpsROutputElem.value = (bpm * framesPerBeat || "") + "/60";
      }

      function onClickFpsCopy(event) {
        fpsOutputElem.select();
        document.execCommand("copy");
      }

      function onClickFpsRCopy(event) {
        fpsROutputElem.select();
        document.execCommand("copy");
      }
    </script>
  </body>
</html>
